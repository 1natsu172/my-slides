import { Head, Image, Appear } from 'mdx-deck'
import { Split } from 'mdx-deck/layouts'
import { CodeSurfer } from 'mdx-deck-code-surfer'
import vsDarkPlus from 'prism-react-renderer/themes/vsDarkPlus'
import dayjs from 'dayjs'
import { Meta } from '../../shared-assets/components'
import { myBaseTheme } from '../../shared-assets/custom-themes'

export const theme = myBaseTheme()

<Head>
  <Meta
    title="@TODO: SLIDE_TITLE"
    description="@TODO: SLIDE_DESC"
    slug="strategy-and-knowledge-for-moderately-good-npm-publish"
    publishedAt={dayjs('2019-04-27')}
  />
  <link
    href="https://fonts.googleapis.com/css?family=Noto+Sans+JP|Sawarabi+Mincho"
    rel="stylesheet"
  />
</Head>

<!-- // EXAMPLE of CodeSurfer // -->
<!-- <CodeSurfer
  title="Some Title"
  code={require("!raw-loader!./my-snippet.ts")}
  lang="typescript"
  showNumbers={false}
  dark={false}
  steps={[
    { notes: "Start with this note"},
    { lines: [6], notes: "Note for the first step" },
    { range: [5, 9] },
    { tokens: { 9: [3, 4, 5] }, notes: "Note for the third step" }
  ]}
/> -->

## æ–‡è„ˆã®å¤šã„ã“ã®ã”æ™‚ä¸–ã«

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’

## npm-publish

[Kyoto.js 16](https://kyotojs.connpass.com/event/124671/)

---

export default Split

![](https://github.com/1natsu172.png)

## 1natsu

ã‚ã‹ã£ãŸãŸã‚ã—ãŒãªã„

---

# ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã®æ–¹é‡

- ä»Šå¾Œã‚’è¦‹æ®ãˆã¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚ŠãŸã„ãŒ
  - ãŒã‚“ã°ã‚ŠãŸãã‚‚ãªã„
  - ãªã‚“ã‹ç¾çŠ¶ã„ã„æ„Ÿã˜ã«ã—ã¨ãæ–¹æ³•ã‚’æ¨¡ç´¢ã—ã¦ã„ã‚‹

---

# CAVEAT

- ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã¯ãªã„
- ã„ã‚ã‚“ãªæ–‡è„ˆã®ã“ã¾ã”ã¾ã¨ã—ãŸè©±
  - ã—ã¾ã›ã‚“
- experimental ãªå†…å®¹ãŒå«ã¾ã‚Œã‚‹
  - ãªã‚“ã‹é–“é•ã£ã¦ã‚‹ã‹ã‚‚
  - äº‹æƒ…ãŒå¤‰ã‚ã‚‹ã‹ã‚‚
- ã‚±ãƒ¼ã‚¹ãƒ»ãƒã‚¤ãƒ»ã‚±ãƒ¼ã‚¹ãªã®ã§
  - è«¦ã‚ã‚‹ã¨ã„ã†é¸æŠã‚‚ã‚ã‚Š
- å€‹ã€…ã®ã‚±ãƒ¼ã‚¹ã®è©³ç´°ãªã‚³ãƒ¼ãƒ‰èª¬æ˜
  - ã‚ã‚“ã¾ã‚Šã—ã¾ã›ã‚“

---

#  ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ï¼Ÿï¼Ÿ

---

<ul style={{ display: 'inline-block' }}>
  <Appear>
    <li>CommonJS</li>
    <li>ESModule</li>
    <li>AMD</li>
    <li>UMD</li>
    <li>etc...</li>
  </Appear>
</ul>

---

<ul style={{ display: 'inline-block' }}>
  <Appear>
    <li>Browserify</li>
    <li>Webpack</li>
    <li>Rollup</li>
    <li>...etc</li>
  </Appear>
</ul>

---

<ul style={{ display: 'inline-block' }}>
  <Appear>
    <li>.js</li>
    <li>.ts</li>
    <li>.mjs</li>
  </Appear>
</ul>

---

# æ–‡è„ˆãŒå¤šã„

èª°ãŒã©ã“ã§ã©ã†ã„ã†é¢¨ã«ä½¿ã†ã®ã‹ãŒå¤šå²ã«ã‚ãŸã‚‹

---

# æä¾›è€…ã¨ã—ã¦

ã©ã†åãå‡ºã—ã¦ãŠã‘ã°ã‚ˆã„ï¼Ÿ

---

# ãŠã•ã‚‰ã„

`package.json`ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æŒ‡å®š

---

```json
{
  "typings": "dist/index.d.ts", // å‹å®šç¾©
  "main": "dist/index.js", // CommonJS
  "module": "dist/index.es.js", // ESModule
  "browser": "dist/index.umd.js", // UMD
  "unpkg": "dist/index.umd.js", // unpkg(UMD)
  "jsdelivr": "dist/index.umd.js", // jsDelivr(UMD)
  "files": ["dist"] // whitelistå½¢å¼ã§npmã«å®Ÿéš›ã«ä¸ŠãŒã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
}
```

---

# ãªã‚“ã‹ã„ã‚ã„ã‚ç”¨æ„ã—ãªã„ã¨ã„ã‘ãªã„ã£ã™ã­

---

# Case.1

---

## ã€ã‚„ã‚‰ãªã„ã€ã¨ã„ã†æ–½ç­–

---

## index.js ã‹ã‚‰ç´ æœ´ã«`module.exports`ã‚„ï¼

<Appear>ã‚¢ãƒªã¨ã„ãˆã°ã‚ã‚Š</Appear>

---

<ul style={{ display: 'inline-block' }}>
  <Appear>
    <h3>å¤±ã†ã‚‚ã®</h3>
    <li>TreeShaking</li>
    <li>CodeSpliting</li>
    <li>äººé¡ã®æ™‚é–“</li>
    <li>etc...</li>
  </Appear>
</ul>

---

# å«Œãªäºˆæ„ŸãŒã™ã‚‹

---

## ã€Please support TypeScriptã€

---

## `d.ts` ä½œã£ã¦å¯¾å¿œ

å‹å®šç¾©æ¬²ã—ã„æ°—æŒã¡ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›®ç·šã§è¦‹ã‚‹ã¨<br/>ã€ã‚ã‹ã‚‹ã€

---

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§<br/> `d.ts` è¿½å¾“ã•ã›ã‚‹ã®ã—ã‚“ã©ã„

<Appear>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ PR ãŒä»®ã«é£›ã‚“ã§ãã¦ã‚‚ã—ã‚“ã©ã„</Appear>

---

## TS ã§æœ€åˆã‹ã‚‰æ›¸ãã‹ã¨ã„ã†æ°—æŒã¡ã«ãªã£ã¦ã—ã¾ã†

---

## TS ã§æ›¸ã

---

## c.f.

> TypeScript å†å…¥é–€ â€• ã€ŒãŒã‚“ã°ã‚‰ãªã„ TypeScriptã€ã§ã€JavaScript ã‚’â€œæŸ”ã‚‰ã‹ã„â€é™çš„å‹ä»˜ãè¨€èªã« - https://employment.en-japan.com/engineerhub/entry/2019/04/16/103000

---

# Case.2

---

## TS ã§æ›¸ã„ã¦

## ã‚ˆã£ã—ã‚ƒã§ããŸãã£ã¦ãªã£ã¦

---

## ğŸ¤” ã©ã†åãå‡ºã™ã‹ ğŸ¤”

ãªã«ã‹ã—ã‚‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¿…è¦

---

<ul style={{ display: 'inline-block', textAlign: 'left' }}>
  <Appear>
    <li>
      Rollupã¨ã‹Webpackã¨ã‹â€¦
      <ul>
        <li>TSå‘ã‘ã®plugin/loader</li>
      </ul>
    </li>
    <li>
      Babel7
      <ul>
        <li>babelã©ã“ã§å‹•ã‹ãã†</li>
      </ul>
    </li>
  </Appear>
</ul>

---

## è¦‹è¿”ã‚ŠãŒã‚ã‚‹ãªã‚‰ã‚¬ãƒ³ãƒãƒªã§ config æ›¸ã„ã¦ã‚‚ã‚ˆã„ãŒâ€¦

- è³ªç´ ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ã—ã‚“ã©ã„
  - config ã®ãƒ¡ãƒ³ãƒ†ãªã€œ

---

## TS ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ç´ æœ´ã«åã

---

```json
"scripts": {
  "build": "npm run build:esnext && npm run build:esm && npm run build:cjs",
  "build:esnext": "tsc --module esnext --target esnext --outDir dist/es --project tsconfig.prod.json",
  "build:esm": "tsc --module esnext --target es5 --outDir dist/esm --project tsconfig.prod.json",
  "build:cjs": "tsc --module commonjs --target es5 --outDir dist/cjs --project tsconfig.prod.json"
}
```

---

# Case.3

---

## ã‚‚ã†ã¡ã‚‡ã„ãªã‚“ã‹ãƒ©ã‚¯ã—ã¤ã¤<br/>ã„ã„æ„Ÿã˜ã«ãªã£ã¦æ¬²ã—ã„

<Appear>ãƒ„ãƒ¼ãƒ«ã«é ¼ã‚‹ä½œæˆ¦</Appear>

---

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åãå‡ºã—ç”¨ã®ãƒãƒ³ãƒ‰ãƒ©<br/>ã„ã‚ã„ã‚ã‚ã‚‹

ã„ãã¤ã‹è¦‹ã¦ã‚ˆã•ã’ãªã‚„ã¤ã‚’ç´¹ä»‹

---

## Microbundle

---

## Bili

---

## @pika/pack

---

# çµ‚
